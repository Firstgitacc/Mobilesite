var IB={};(function(a){IB.rtl=a("html").attr("lang")=="ar";IB.nav={url:window.location.pathname,flag_to_scroll:true,set_search_page:function(b){this.url=b},get_search_page:function(){return this.url},value_cache:{},widgets:[],selection:{},sliders:{},toggle_value:function(d,c){this._create_widget(d,"set");var b=jQuery.inArray(c,this.selection[d].values);if(b==-1){this.selection[d].values.push(c)}else{this.selection[d].values.splice(b,1)}},toggle_selection:function(b,d,c){$me=a("#"+b).children().first();if(!c){if($me.hasClass("disabled")){return false}}IB.nav.toggle_value(d,$me.attr("data-value"));$me.toggleClass("selected");a.address.value(IB.nav.url_params());return false},force_set_value:function(d,c){this._create_widget(d,"set");var b=jQuery.inArray(c,this.selection[d].values);if(b==-1){this.selection[d].values.push(c)}},force_remove_value:function(d,c){this._create_widget(d,"set");var b=jQuery.inArray(c,this.selection[d].values);if(b!=-1){this.selection[d].values.splice(b,1)}},set_single_value:function(c,b){delete this.selection[c];this._create_widget(c,"single");this.selection[c].value=b},unset_single_value:function(c,b){delete this.selection[c]},set_min:function(c,b){this._create_widget(c,"range");this.selection[c].min=b},set_max:function(c,b){this._create_widget(c,"range");this.selection[c].max=b},enableResetFilters:function(){var b=false;a("#filters-container").children().each(function(){if(a(this).hasClass("show-filters")){a("#reset-filters-button").removeClass("hide");b=true}});if(b==false){a("#reset-filters-button").addClass("hide")}},resetFilters:function(){a(".filters-container").each(function(){$btn=a(this).find(".filters-button");var d=$btn.attr("data-facet-name");var c=(typeof $btn.attr("data-value")=="undefined"?null:$btn.attr("data-value"));var b=$btn.attr("type");if(b=="user-search"){window.location.href=IB.nav.url}else{IB.nav.unset_single_value(d,c)}});a.address.value(IB.nav.url_params())},_create_widget:function(c,b){if(!this.selection[c]){this.widgets.push([c,a("#facet-"+c).find("h6").text()]);this.selection[c]={type:b||"set",values:[]}}},url_params:function(){var e=[];var c=this.selection;for(w in c){var d=c[w].type||"";if(d=="set"){for(var b=0;b<c[w].values.length;b++){e.push(w+"[]="+c[w].values[b])}}else{if(d=="single"){e.push(w+"="+c[w].value)}else{if(d=="range"){if(c[w].min!=undefined){e.push(w+".min="+c[w].min)}if(c[w].max!=undefined){e.push(w+".max="+c[w].max)}}}}}e.push("_xhr=1");return"?"+e.join("&")},range:{modify_opts:function(c){if(IB.rtl){var b=c.min;c.min=-c.max;c.max=-b;c.values=[-c.values[1],-c.values[0]]}return c},update_label:function(d,c,b){if(IB.rtl){d.text(-b[1]);c.text(-b[0])}else{d.text(b[0]);c.text(b[1])}},update_label_for_view_currency:function(f,d,b,c){var e=[];if(isNaN(c)){c=1}e[0]=Math.floor(b[0]*c);e[1]=Math.ceil(b[1]*c);this.update_label(f,d,e)}},update_ui:function(c){var d=c.multiselect||[];for(var h in d){var k=this.value_cache[h];if(k){var j=false;for(var g in d[h]){var e=k[g];if(e){e.find("i").text(d[h][g].count);if(!d[h][g].enabled){e.addClass("disabled")}else{if(e.hasClass("disabled")){e.removeClass("disabled")}}if(d[h][g].selected){if(!e.hasClass("selected")){e.addClass("selected")}IB.nav.force_set_value(h,g);j=true;a("#filters-"+h).append('<div id="'+e.attr("data-value")+'" class="filters">'+e.attr("data-display-value")+'<div data-value="'+e.attr("data-value")+'" data-display-value="'+e.attr("data-display-value")+'" data-facet-name="'+e.attr("data-facet-name")+'" type="multiselect" class="filters-button"><b>X</b></div></div>');a("#filters-"+h).addClass("show-filters")}else{e.removeClass("selected");IB.nav.force_remove_value(h,g)}}}if(j){a("#facet-"+h).addClass("active")}else{a("#facet-"+h).removeClass("active")}}}var f=c.range||[];for(var h in f){var b=f[h];var l=a("#facet-"+h);var m={min:b.min,max:b.max,values:[b.values[0],b.values[1]],range:true};IB.nav.unset_single_value(h,null);switch(b.min_max_set){case 1:IB.nav.set_min(h,b.request_min);a("#filters-"+h).append('<div class="filters">'+b.request_min+' or more<div class="filters-button" type="range"  data-facet-name="'+l.attr("data-facet-name")+'"><b>X</b></div></div>');a("#filters-"+h).addClass("show-filters");break;case 2:IB.nav.set_max(h,b.request_max);a("#filters-"+h).append('<div class="filters">'+b.request_max+' or lesser<div class="filters-button" type="range"  data-facet-name="'+l.attr("data-facet-name")+'"><b>X</b></div></div>');a("#filters-"+h).addClass("show-filters");break;case 3:IB.nav.set_min(h,b.request_min);IB.nav.set_max(h,b.request_max);a("#filters-"+h).append('<div class="filters">'+b.request_min+" - "+b.request_max+'<div class="filters-button" type="range"  data-facet-name="'+l.attr("data-facet-name")+'"><b>X</b></div></div>');a("#filters-"+h).addClass("show-filters");break}var l=a("#facet-"+h);l.find(".slider").slider("option",this.range.modify_opts(b));this.range.update_label_for_view_currency(l.find(".min"),l.find(".max"),b.values,l.find(".slider").data("ratio"));if(b.min!=b.values[0]||b.max!=b.values[1]){l.addClass("active")}else{l.removeClass("active")}a(document).trigger("search-facets-ui-updated",b)}if(a(".facet.active").length>0){a("#facets .reset_all").addClass("active")}else{a("#facets .reset_all").removeClass("active")}IB.nav.enableResetFilters()}};IB.views={current:"list-view",getClass:function(b){return(this.classes&&this.classes[b])||b}};a(function(){a(document).on("click",".notify-me",function(){a(this).prev("input[name=uri]").val(document.location.href)});a(".filter-bttn").click(function(){a("#facets").slideToggle();a(this).toggleClass("open")});var d=IB.nav.value_cache;a(document).on("click",".show-as",function(){var e=IB.views.current,f=a(this).data("view-type");a("#search-result-items").removeClass(IB.views.getClass(e)).addClass(IB.views.getClass(f));a.cookies.set("pref",{search_view_type:f});IB.views.current=f;a("."+e).removeClass("selected");a("."+f).addClass("selected");a(".variant-images").trigger("refresh");return false});a(document).on("click",".pagination a",function(){var e=a(this).attr("href").match(/page=(\d+)/)[1];var f=a("#results_per_page option:selected").attr("value");IB.nav.set_single_value("page",e);if(f){IB.nav.set_single_value("per_page",f)}a.address.value(IB.nav.url_params());IB.nav.unset_single_value("page",e);return false});function c(){if(a(".compare-bar .item-list .empty-item").length===0){a(".variant-wrapper .compare").not(".selected").addClass("disabled")}}a(document).on("click",".compare a",function(g){var f=a(this);var e=f.parent();var j=f.data("browse-node-id");if(e.hasClass("disabled")){return false}if(e.hasClass("selected")){var h=f.data("variant-id");COMPARE.removeVariantFromCompareCookie(h,j);COMPARE.removeVariantFromCompareBar(h)}else{a.ajax({url:"/products/add_to_compare",data:{variant_id:f.data("variant-id"),cache_key:"compare"},beforeSend:function(){f.addClass("adding-to-compare")},success:function(k){e.addClass("selected");COMPARE.addVariantToCompareBar(k.html,j);c()},error:function(k){console.log(k.responseText)},complete:function(){f.removeClass("adding-to-compare")}})}return false});a(document).bind("browse-node-search",function(g,f){a(".rating").initRatings({star_image_path:f.ratings_image_path});a(document).unbind("search.variant_changed.init-rating").bind("search.variant_changed.init-rating",function(){a(".rating").initRatings({star_image_path:f.ratings_image_path})})});a(document).bind("item-removed-from-compare",function(f,g){a(".compare a[data-variant-id="+g+"]").parent().removeClass("selected");a(".variant-wrapper .compare").removeClass("disabled")});a(document).bind("compare-bar-generated",function(f,g){c()});a(".filters").ready(function(){a(this).delegate("div.filters-button","click",function(){if(a(this).attr("type")=="multiselect"){var e=a(this).attr("data-value");var f=a(this).attr("data-facet-name");return IB.nav.toggle_selection(e,f,true)}else{if(a(this).attr("type")=="range"){$facet=a("#facet-"+a(this).attr("data-facet-name"));$slider=$facet.find(".slider");$min_label=$facet.find(".min").text(parseInt($slider.attr("data-range-min")));$max_label=$facet.find(".max").text(parseInt($slider.attr("data-range-max")));IB.nav.unset_single_value($facet.attr("data-facet-name"),null);a.address.value(IB.nav.url_params())}else{window.location.href=IB.nav.url}}})});a("#facets .multiselect").each(function(){var e=a(this);var f=e.attr("data-facet-name");d[f]={};e.find("li").each(function(){var g=a(this);var h=g.attr("data-value");d[f][h]=g;g.data({value:h});if(g.hasClass("selected")){IB.nav.toggle_value(f,h)}});e.delegate("li","click",function(){var g=a(this);if(g.hasClass("disabled")){return false}IB.nav.toggle_value(f,g.attr("data-value"));g.toggleClass("selected");a.address.value(IB.nav.url_params());return false})});a("#facets .range").each(function(){var g=a(this);var h=g.attr("data-facet-name");var f=g.find(".min"),e=g.find(".max");g.find(".slider").each(function(){var j=a(this);var l=j.attr("min-max-set");switch(parseInt(l)){case 1:IB.nav.set_min(h,parseInt(j.attr("data-request-min")));break;case 2:IB.nav.set_max(h,parseInt(j.attr("data-request-max")));break;case 3:IB.nav.set_min(h,parseInt(j.attr("data-request-min")));IB.nav.set_max(h,parseInt(j.attr("data-request-max")));break}var k={range:true,min:parseInt(j.attr("data-range-min")),max:parseInt(j.attr("data-range-max")),values:[parseInt(j.attr("data-selected-min")),parseInt(j.attr("data-selected-max"))]};j.slider(a.extend(IB.nav.range.modify_opts(k),{slide:function(m,n){IB.nav.range.update_label_for_view_currency(f,e,n.values,j.data("ratio"))},stop:function(n,o){IB.nav.range.update_label_for_view_currency(f,e,o.values,j.data("ratio"));var m=a(o.handle).data("index.ui-slider-handle");if(IB.rtl){IB.nav[m==0?"set_max":"set_min"](h,-o.values[m])}else{IB.nav[m==0?"set_min":"set_max"](h,o.values[m])}a.address.value(IB.nav.url_params())}}))})});a(document).on("change","#sort_type",function(e){IB.nav.set_single_value("sort_type",a("#sort_type option:selected").attr("value"));a.address.value(IB.nav.url_params());return false});a(document).on("click",".sort-type-list a",function(e){IB.nav.set_single_value("sort_type",a(this).data("value"));a.address.value(IB.nav.url_params());return false});a(document).on("change","#results_per_page",function(e){IB.nav.set_single_value("per_page",a("#results_per_page option:selected").attr("value"));a.address.value(IB.nav.url_params());return false});var b=0;a.address.tracker(function(){a.address.tracker("track")});a.address.change(function(g){if(!g.value.match(/^\/\?/)){return}if(b==0){a.address.externalChange(function(h){if(h.value=="/"){document.location=document.location}})}var e=g.value.replace(/^\//,"");e=IB.nav.get_search_page()+e;b=b+1;var f=b;a.ajax({url:e,beforeSend:function(){if(IB.nav.flag_to_scroll){if(a(".filter-bttn").css("display")=="block"){a("#facets").css("display","none");a(".filter-bttn").removeClass("open")}var h=a("#content-slot").offset().top;if(h<200){h=0}a("html, body").animate({scrollTop:h},800,"easeOutExpo")}if(a("#search-results .ajax-loader").length==0){a("#search-results").prepend(a("<div>",{"class":"ajax-loader"})).css("position","relative")}a("#search-results .ajax-loader").show()},success:(function(h){return function(j){if(h==b){var k=a("#content-slot");if(a("#right-slot").size()>0){a("#right-slot").remove();k.removeClass("span-14").addClass("span-19 last").parent().removeClass("span-20").addClass("span-24")}var l=k.find(".page-content");l.parent().nextAll().remove();l.empty().append(j)}}})(f),error:(function(h){})(f),complete:function(){a("#search-results .ajax-loader").hide();BAB.initProducts();a("#search-results").initResponsiveImage()}})});a("#facets .reset_all").click(function(){a.address.value("?");return false});a("#facets .reset").click(function(){var e=a(this).closest(".facet");var f=e.attr("data-facet-name");IB.nav.unset_single_value(f,"all");a.address.value(IB.nav.url_params());return false})})})(bjQuery);(function(a){a.address=function(){var aH=function(d){a(a.address).trigger(a.extend(a.Event(d),function(){for(var g={},k=a.address.parameterNames(),h=0,j=k.length;h<j;h++){g[k[h]]=a.address.parameter(k[h])}return{value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:k,parameters:g,queryString:a.address.queryString()}}.call(a.address)))},aG=function(){a().bind.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},aL=function(){return ah.pushState&&aV.state!==aR},aK=function(){return("/"+aU.pathname.replace(new RegExp(aV.state),"")+aU.search+(ap()?"#"+ap():"")).replace(ab,"/")},ap=function(){var d=aU.href.indexOf("#");return d!=-1?ar(aU.href.substr(d+1),aQ):""},aI=function(){return aL()?aK():ap()},c=function(){return"javascript"},ag=function(d){d=d.toString();return(aV.strict&&d.substr(0,1)!="/"?"/":"")+d},ar=function(g,d){if(aV.crawlable&&d){return(g!==""?"!":"")+g}return g.replace(/^\!/,"")},aF=function(g,d){return parseInt(g.css(d),10)},T=function(g){for(var d,l,j=0,k=g.childNodes.length;j<k;j++){try{if("src" in g.childNodes[j]&&g.childNodes[j].src){d=String(g.childNodes[j].src)}}catch(h){}if(l=T(g.childNodes[j])){d=l}}return d},an=function(){if(!aj){var d=aI();if(aT!=d){if(aD&&aM<7){aU.reload()}else{aD&&aM<8&&aV.history&&aJ(af,50);aT=d;ao(aQ)}}}},ao=function(d){aH(S);aH(d?A:p);aJ(e,10)},e=function(){if(aV.tracker!=="null"&&aV.tracker!==null){var g=a.isFunction(aV.tracker)?aV.tracker:aS[aV.tracker],d=(aU.pathname+aU.search+(a.address&&!aL()?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(a.isFunction(g)){g(d)}else{if(a.isFunction(aS.urchinTracker)){aS.urchinTracker(d)}else{if(aS.pageTracker!==aR&&a.isFunction(aS.pageTracker._trackPageview)){aS.pageTracker._trackPageview(d)}else{aS._gaq!==aR&&a.isFunction(aS._gaq.push)&&aS._gaq.push(["_trackPageview",decodeURI(d)])}}}}},af=function(){var d=c()+":"+aQ+";document.open();document.writeln('<html><head><title>"+aO.title.replace("'","\\'")+"</title><script>var "+aq+' = "'+encodeURIComponent(aI())+(aO.domain!=aU.hostname?'";document.domain="'+aO.domain:"")+"\";<\/script></head></html>');document.close();";if(aM<7){aP.src=d}else{aP.contentWindow.location.replace(d)}},at=function(){if(am&&ay!=-1){var g,d=am.substr(ay+1).split("&");for(i=0;i<d.length;i++){g=d[i].split("=");if(/^(autoUpdate|crawlable|history|strict|wrap)$/.test(g[0])){aV[g[0]]=isNaN(g[1])?/^(true|yes)$/i.test(g[1]):parseInt(g[1],10)!==0}if(/^(state|tracker)$/.test(g[0])){aV[g[0]]=g[1]}}am=null}aT=aI()},az=function(){if(!aW){aW=aN;at();var g=function(){aB.call(this);aw.call(this)},d=a("body").ajaxComplete(g);g();if(aV.wrap){a("body > *").wrapAll('<div style="padding:'+(aF(d,"marginTop")+aF(d,"paddingTop"))+"px "+(aF(d,"marginRight")+aF(d,"paddingRight"))+"px "+(aF(d,"marginBottom")+aF(d,"paddingBottom"))+"px "+(aF(d,"marginLeft")+aF(d,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+aq+'" style="height:100%;overflow:auto;position:relative;'+(al&&!window.statusbar.visible?"resize:both;":"")+'" />');a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});al&&a('<style type="text/css" />').appendTo("head").text("#"+aq+"::-webkit-resizer { background-color: #fff; }")}if(aD&&aM<8){g=aO.getElementsByTagName("frameset")[0];aP=aO.createElement((g?"":"i")+"frame");if(g){g.insertAdjacentElement("beforeEnd",aP);g[g.cols?"cols":"rows"]+=",0";aP.noResize=aN;aP.frameBorder=aP.frameSpacing=0}else{aP.style.display="none";aP.style.width=aP.style.height=0;aP.tabIndex=-1;aO.body.insertAdjacentElement("afterBegin",aP)}aJ(function(){a(aP).bind("load",function(){var h=aP.contentWindow;aT=h[aq]!==aR?h[aq]:"";if(aT!=aI()){ao(aQ);aU.hash=ar(aT,aN)}});aP.contentWindow[aq]===aR&&af()},50)}aJ(function(){aH("init");ao(aQ)},1);if(!aL()){if(aD&&aM>7||!aD&&"on"+ak in aS){if(aS.addEventListener){aS.addEventListener(ak,an,aQ)}else{aS.attachEvent&&aS.attachEvent("on"+ak,an)}}else{f(an,50)}}}},aB=function(){var g,d=a("a"),k=d.size(),h=-1,j=function(){if(++h!=k){g=a(d.get(h));g.is('[rel*="address:"]')&&g.address();aJ(j,1)}};aJ(j,1)},aE=function(){if(aT!=aI()){aT=aI();ao(aQ)}},ax=function(){if(aS.removeEventListener){aS.removeEventListener(ak,an,aQ)}else{aS.detachEvent&&aS.detachEvent("on"+ak,an)}},aw=function(){if(aV.crawlable){var d=aU.pathname.replace(/\/$/,"");a("body").html().indexOf("_escaped_fragment_")!=-1&&a('a[href]:not([href^=http]), a[href*="'+document.domain+'"]').each(function(){var g=a(this).attr("href").replace(/^http:/,"").replace(new RegExp(d+"/?$"),"");if(g===""||g.indexOf("_escaped_fragment_")!=-1){a(this).attr("href","#"+g.replace(/\/(.*)\?_escaped_fragment_=(.*)$/,"!$2"))}})}},aR,aq="jQueryAddress",ak="hashchange",S="change",A="internalChange",p="externalChange",aN=true,aQ=false,aV={autoUpdate:aN,crawlable:aQ,history:aN,strict:aN,wrap:aQ},aC=a.browser,aM=parseFloat(a.browser.version),au=aC.mozilla,aD=aC.msie,b=aC.opera,al=aC.webkit||aC.safari,ae=aQ,aS=function(){try{return top.document!==aR?top:window}catch(d){return window}}(),aO=aS.document,ah=aS.history,aU=aS.location,f=setInterval,aJ=setTimeout,ab=/\/{2,9}/g;aC=navigator.userAgent;var aP,am=T(document),ay=am?am.indexOf("?"):-1,ad=aO.title,aj=aQ,aW=aQ,ac=aN,aA=aN,ai=aQ,aT=aI();if(aD){aM=parseFloat(aC.substr(aC.indexOf("MSIE")+4));if(aO.documentMode&&aO.documentMode!=aM){aM=aO.documentMode!=8?7:8}var av=aO.onpropertychange;aO.onpropertychange=function(){av&&av.call(aO);if(aO.title!=ad&&aO.title.indexOf("#"+aI())!=-1){aO.title=ad}}}if(ae=au&&aM>=1||aD&&aM>=6||b&&aM>=9.5||al&&aM>=523){if(b){history.navigationMode="compatible"}if(document.readyState=="complete"){var J=setInterval(function(){if(a.address){az();clearInterval(J)}},50)}else{at();a(az)}a(window).bind("popstate",aE).bind("unload",ax)}else{!ae&&ap()!==""?aU.replace(aU.href.substr(0,aU.href.indexOf("#"))):e()}return{bind:function(g,d,h){return aG(g,d,h)},init:function(d){return aG("init",d)},change:function(d){return aG(S,d)},internalChange:function(d){return aG(A,d)},externalChange:function(d){return aG(p,d)},baseURL:function(){var d=aU.href;if(d.indexOf("#")!=-1){d=d.substr(0,d.indexOf("#"))}if(/\/$/.test(d)){d=d.substr(0,d.length-1)}return d},autoUpdate:function(d){if(d!==aR){aV.autoUpdate=d;return this}return aV.autoUpdate},crawlable:function(d){if(d!==aR){aV.crawlable=d;return this}return aV.crawlable},history:function(d){if(d!==aR){aV.history=d;return this}return aV.history},state:function(g){if(g!==aR){aV.state=g;var d=aK();if(aV.state!==aR){if(ah.pushState){d.substr(0,3)=="/#/"&&aU.replace(aV.state.replace(/^\/$/,"")+d.substr(2))}else{d!="/"&&d.replace(/^\/#/,"")!=ap()&&aJ(function(){aU.replace(aV.state.replace(/^\/$/,"")+"/#"+d)},1)}}return this}return aV.state},strict:function(d){if(d!==aR){aV.strict=d;return this}return aV.strict},tracker:function(d){if(d!==aR){aV.tracker=d;return this}return aV.tracker},wrap:function(d){if(d!==aR){aV.wrap=d;return this}return aV.wrap},update:function(){ai=aN;this.value(aT);ai=aQ;return this},title:function(d){if(d!==aR){aJ(function(){ad=aO.title=d;if(aA&&aP&&aP.contentWindow&&aP.contentWindow.document){aP.contentWindow.document.title=d;aA=aQ}if(!ac&&au){aU.replace(aU.href.indexOf("#")!=-1?aU.href:aU.href+"#")}ac=aQ},50);return this}return aO.title},value:function(d){if(d!==aR){d=ag(d);if(d=="/"){d=""}if(aT==d&&!ai){return}ac=aN;aT=d;if(aV.autoUpdate||ai){ao(aN);if(aL()){ah[aV.history?"pushState":"replaceState"]({},"",aV.state.replace(/\/$/,"")+(aT===""?"/":aT))}else{aj=aN;if(al){if(aV.history){aU.hash="#"+ar(aT,aN)}else{aU.replace("#"+ar(aT,aN))}}else{if(aT!=aI()){if(aV.history){aU.hash="#"+ar(aT,aN)}else{aU.replace("#"+ar(aT,aN))}}}aD&&aM<8&&aV.history&&aJ(af,50);if(al){aJ(function(){aj=aQ},1)}else{aj=aQ}}}return this}if(!ae){return null}return ag(aT)},path:function(g){if(g!==aR){var d=this.queryString(),h=this.hash();this.value(g+(d?"?"+d:"")+(h?"#"+h:""));return this}return ag(aT).split("#")[0].split("?")[0]},pathNames:function(){var g=this.path(),d=g.replace(ab,"/").split("/");if(g.substr(0,1)=="/"||g.length===0){d.splice(0,1)}g.substr(g.length-1,1)=="/"&&d.splice(d.length-1,1);return d},queryString:function(g){if(g!==aR){var d=this.hash();this.value(this.path()+(g?"?"+g:"")+(d?"#"+d:""));return this}g=aT.split("?");return g.slice(1,g.length).join("?").split("#")[0]},parameter:function(o,m,l){var k,d;if(m!==aR){var n=this.parameterNames();d=[];m=m?m.toString():"";for(k=0;k<n.length;k++){var j=n[k],g=this.parameter(j);if(typeof g=="string"){g=[g]}if(j==o){g=m===null||m===""?[]:l?g.concat([m]):[m]}for(var h=0;h<g.length;h++){d.push(j+"="+g[h])}}a.inArray(o,n)==-1&&m!==null&&m!==""&&d.push(o+"="+m);this.queryString(d.join("&"));return this}if(m=this.queryString()){l=[];d=m.split("&");for(k=0;k<d.length;k++){m=d[k].split("=");m[0]==o&&l.push(m.slice(1).join("="))}if(l.length!==0){return l.length!=1?l:l[0]}}},parameterNames:function(){var g=this.queryString(),d=[];if(g&&g.indexOf("=")!=-1){g=g.split("&");for(var j=0;j<g.length;j++){var h=g[j].split("=")[0];a.inArray(h,d)==-1&&d.push(h)}}return d},hash:function(d){if(d!==aR){this.value(aT.split("#")[0]+(d?"#"+d:""));return this}d=aT.split("#");return d.slice(1,d.length).join("#")}}}();a.fn.address=function(c){if(!a(this).attr("address")){var b=function(e){if(e.shiftKey||e.ctrlKey||e.metaKey){return true}if(a(this).is("a")){var d=c?c.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:a.address.state()!==undefined&&a.address.state()!="/"?a(this).attr("href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""):a(this).attr("href").replace(/^(#\!?|\.)/,"");a.address.value(d);e.preventDefault()}};a(this).click(b).live("click",b).live("submit",function(e){if(a(this).is("form")){var d=a(this).attr("action");d=c?c.call(this):(d.indexOf("?")!=-1?d.replace(/&$/,""):d+"?")+a(this).serialize();a.address.value(d);e.preventDefault()}}).attr("address",true)}return this}})(jQuery);